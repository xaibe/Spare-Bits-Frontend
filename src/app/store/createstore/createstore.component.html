<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button
        (click)="dismiss()"
        defaultHref="store"
      ></ion-back-button>
    </ion-buttons>
    <ion-title *ngIf="!store" class="ion-text-center"
      >Create New Store</ion-title
    >
    <ion-title *ngIf="store" class="ion-text-center">Edit Store</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content color="">
  <form [formGroup]="createStoreForm">
    <ion-grid>
      <ion-row color="justify-content-center">
        <ion-col
          class="ion-align-self-center"
          size-md="6"
          size-lg="5"
          size-xs="12"
        >
          <div class="ion-padding">
            <ion-item>
              <ion-input
                name="name"
                formControlName="name"
                (ionInput)="onchange($event)"
                type="text "
                placeholder="Name"
              ></ion-input>
            </ion-item>

            <ion-item>
              <ion-input
                name="mnumber "
                inputmode="tel"
                pattern="[0-9]*"
                type="tel"
                maxlength="11"
                minlength="11"
                formControlName="Phone"
              ></ion-input>
            </ion-item>

            <ion-item>
              <ion-label color="primary">Address</ion-label>
            </ion-item>

            <ion-item>
              <ion-textarea
                auto-grow="true"
                (ionInput)="onchangetext($event)"
                formControlName="Address1"
                name="Address1"
                type="text"
                placeholder="Address1"
              >
              </ion-textarea>
            </ion-item>

            <ion-item>
              <ion-textarea
                auto-grow="true"
                (ionInput)="onchangetext($event)"
                formControlName="Address2"
                name="Address2"
                type="text"
                placeholder="Address2"
              ></ion-textarea>
            </ion-item>

            <ion-item>
              <ion-textarea
                auto-grow="true"
                (ionInput)="onchangetext($event)"
                name="Province"
                type="text"
                placeholder="State/Province"
                formControlName="Province"
              >
              </ion-textarea
            ></ion-item>
            <ion-row>
              <ion-col>
                <ion-item>
                  <ion-textarea
                    auto-grow="true"
                    (ionInput)="onchangetext($event)"
                    name="City"
                    type="text"
                    placeholder="City"
                    formControlName="City"
                  >
                  </ion-textarea
                ></ion-item>
              </ion-col>
              <ion-col>
                <ion-item>
                  <ion-input
                    inputmode="tel"
                    pattern="[0-9]*"
                    type="tel"
                    maxlength="5"
                    minlength="5"
                    formControlName="Zipcode"
                    placeholder="Zipcode"
                  >
                  </ion-input>
                </ion-item>
              </ion-col>
            </ion-row>

            <div class="container">
              <ion-item>
                <ion-label color="primary">Catageory</ion-label>
                <!-- <ion-select formControlName="catageory" placeholder="Select Categeory" #mySelect
                (select)='onOptionsSelected(mySelect.value)' > -->

                <ion-select
                  formControlName="catageory"
                  placeholder="Select Categeory"
                  (ionChange)="onChange($event)"
                >
                  <ion-select-option
                    *ngFor="let categeorys of categeory"
                    value="{{ categeorys.id }}"
                    >{{ categeorys.name }}</ion-select-option
                  >
                </ion-select>
              </ion-item>

              <ion-item>
                <ion-label>SubCatageory</ion-label>
                <ion-select
                  formControlName="subCatageory"
                  [disabled]="disableBtn"
                  placeholder="Select SubCategeory"
                >
                  <ion-select-option
                    *ngFor="let subcategeorys of subcategeory"
                    value="{{ subcategeorys.name }}"
                    >{{ subcategeorys.name }}
                  </ion-select-option>
                </ion-select>
              </ion-item>
            </div>

            <ion-item>
              <ion-label color="primary" position="floating"
                >Description</ion-label
              >
              <ion-textarea
                formControlName="discription"
                (ionChange)="onchangetext($event)"
                placeholder="Discription"
              ></ion-textarea>
            </ion-item>
          </div>
          <div class="container text-center">
            <img *ngFor="let url of urls" [src]="url" height="80" /><br />
            <input type="file" (change)="onselect($event)" multiple />
          </div>

          <div class="ion-padding">
            <!-- <ion-button size="large"  (click)="upload()" color="primary" type="submit"
              expand="block">Upload Image &nbsp;<ion-spinner *ngIf="loading"></ion-spinner>

            </ion-button> -->

            <ion-button
              *ngIf="!store"
              size="large"
              [disabled]="createStoreForm.invalid || loading"
              (click)="save()"
              color="primary"
              type="submit"
              expand="block"
              >SAVE <ion-spinner *ngIf="loading"></ion-spinner>
            </ion-button>

            <ion-button
              *ngIf="store"
              size="large"
              [disabled]="createStoreForm.invalid || loading"
              (click)="save()"
              color="primary"
              type="submit"
              expand="block"
              >Update <ion-spinner *ngIf="loading"></ion-spinner>
            </ion-button>

            <ion-button
              *ngIf="store"
              size="large"
              (click)="delete(store._id)"
              color="primary"
              type="submit"
              [disabled]="loading"
              expand="block"
            >
              <ion-icon name="trash"></ion-icon>
              Delete <ion-spinner *ngIf="loading"></ion-spinner>
            </ion-button>
          </div>
        </ion-col>
      </ion-row>
    </ion-grid>
  </form>
</ion-content>
